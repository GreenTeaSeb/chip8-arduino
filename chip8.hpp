#pragma once
#include <stdint.h>

#define SPRITE_SIZE 8
#define MEMORY_SIZE 4096
#define WIDTH 64
#define HEIGHT 32
#define SLEEP 16

namespace chip8
{
  constexpr PROGMEM uint8_t chip8_fontset[80] = {
      0xF0, 0x90, 0x90, 0x90, 0xF0, // 0
      0x20, 0x60, 0x20, 0x20, 0x70, // 1
      0xF0, 0x10, 0xF0, 0x80, 0xF0, // 2
      0xF0, 0x10, 0xF0, 0x10, 0xF0, // 3
      0x90, 0x90, 0xF0, 0x10, 0x10, // 4
      0xF0, 0x80, 0xF0, 0x10, 0xF0, // 5
      0xF0, 0x80, 0xF0, 0x90, 0xF0, // 6
      0xF0, 0x10, 0x20, 0x40, 0x40, // 7
      0xF0, 0x90, 0xF0, 0x90, 0xF0, // 8
      0xF0, 0x90, 0xF0, 0x10, 0xF0, // 9
      0xF0, 0x90, 0xF0, 0x90, 0x90, // A
      0xE0, 0x90, 0xE0, 0x90, 0xE0, // B
      0xF0, 0x80, 0x80, 0x80, 0xF0, // C
      0xE0, 0x90, 0x90, 0x90, 0xE0, // D
      0xF0, 0x80, 0xF0, 0x80, 0xF0, // E
      0xF0, 0x80, 0xF0, 0x80, 0x80  // F4
    };
  extern uint8_t memory[MEMORY_SIZE] ;
  extern uint8_t pixels[(WIDTH*HEIGHT/8)];
  extern uint8_t drawFlag ;
  void setup();
  void awaitKeyPress(uint16_t X);
  void skipNextInst();
  void cycle();
  void set_key(uint8_t k, bool state);
  void draw(uint8_t x, uint8_t y, uint8_t h);
  bool get_pixel(uint8_t row, uint8_t col);
  bool set_pixel(uint8_t row, uint8_t col, bool pixel);
}

